<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Inicio - Maquinarias Agr칤colas</title>
    <link rel="stylesheet" th:href="@{/css/home.css}" />
  </head>
  <body>
    <header>
      <div class="logo"><h1>游 Maquinarias Agr칤colas</h1></div>
      <div class="topbar">
        <div id="auth-buttons">
          <a href="/login">Iniciar Sesi칩n</a> |
          <a href="/register">Registrarse</a>
        </div>
        <div class="user-info" id="user-info">
          Hola, <span id="usuarioNombre"></span> |
          <span id="admin-buttons">
            <a href="/admin/maquinas">Gestionar M치quinas</a> |
            <a href="/admin/types">Gestionar Tipos</a> |
          </span>
          <a href="#" id="logoutBtn">Cerrar sesi칩n</a>
        </div>
      </div>
    </header>

    <div class="content">
      <!-- Banner Izquierdo -->
      <div class="banner">
        <h3>Aviso Comercial</h3>
        <p>Publicidad o anuncios aqu칤.</p>
      </div>

      <!-- Contenido principal -->
      <div class="main">
        <!-- Filtros -->
        <form class="filters" th:action="@{/}" method="get">
          <select name="tipo">
            <option value="">Tipo</option>
            <option value="tractor">Tractor</option>
            <option value="cosechadora">Cosechadora</option>
          </select>
          <input type="text" name="marca" placeholder="Marca" />
          <input type="text" name="modelo" placeholder="Modelo" />
          <input type="number" name="anio" placeholder="A침o" />
          <select name="estado">
            <option value="">Estado</option>
            <option value="nuevo">Nuevo</option>
            <option value="usado">Usado</option>
          </select>
          <button type="submit">Filtrar</button>
        </form>

        <!-- 칔ltimas m치quinas -->
        <h2>칔ltimas m치quinas agregadas</h2>
        <div class="cards">
          <div th:each="maquina : ${ultimas}" class="card">
            <h3 th:text="${maquina.marca} + ' ' + ${maquina.modelo}"></h3>
            <p th:text="'A침o: ' + ${maquina.anioFabricacion}"></p>
            <p th:text="'Estado: ' + ${maquina.estado}"></p>
            <button
              th:if="${usuarioLogueado != null}"
              th:attr="onclick=|window.location.href='/arriendo/${maquina.id}';|"
            >
              Ver Detalles
            </button>
            <button
              th:if="${usuarioLogueado == null}"
              onclick="alert('Debes iniciar sesi칩n o registrarte para ver detalles una m치quina')"
            >
              Ver Detalles
            </button>
          </div>
        </div>

        <!-- Populares -->
        <h2>M치quinas populares</h2>
        <div class="cards">
          <div th:each="maquina : ${populares}" class="card">
            <h3 th:text="${maquina.marca} + ' ' + ${maquina.modelo}"></h3>
            <p th:text="'A침o: ' + ${maquina.anioFabricacion}"></p>
            <button
              th:if="${usuarioLogueado != null}"
              th:attr="onclick=|window.location.href='/arriendo/${maquina.id}';|"
            >
              Ver Detalles
            </button>
            <button
              th:if="${usuarioLogueado == null}"
              onclick="alert('Debes iniciar sesi칩n o registrarte para ver detalles una m치quina')"
            >
              Ver Detalles
            </button>
          </div>
        </div>
      </div>

      <!-- Banner Derecho -->
      <div class="banner">
        <h3>Aviso Comercial</h3>
        <p>Publicidad o anuncios aqu칤.</p>
      </div>
    </div>
    <script th:src="@{/js/home.js}" defer></script>
  </body>
</html>
